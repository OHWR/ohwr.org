{{ define "main" }}

<!--
SPDX-FileCopyrightText: 2025 CERN (home.cern)

SPDX-License-Identifier: BSD-3-Clause
-->

<section class="banner">
  <div class="container">
    <div class="row">
      <div class="col-lg-10 mx-auto text-center">
        <h1 class="mb-3">404</h1>
        <p class="mb-4">{{ i18n "error404" }}</p>
        <p class="font-weight-bold">
          As of April 2025, all Open Hardware Repository projects have been
          migrated to GitLab:
          <a href="https://gitlab.com/ohwr" target="_blank" rel="noopener noreferrer">https://gitlab.com/ohwr</a>.
        </p>
        <p class="font-weight-bold">
          The page you're looking for may have moved to
          <a id="gitlab-link" href="https://gitlab.com/ohwr" target="_blank" rel="noopener noreferrer">GitLab</a>.
        </p>
      </div>
    </div>
  </div>
</section>

<script>
  let path = window.location.pathname;
  const targetMarker1 = '/-/wikis/uploads/';
  const regex1 = /^(.*?)(?:\/uploads\/|\/wikis\/uploads\/|\/-\/wikis\/uploads\/)(.*)$/;
  path = path.replace(regex1, `$1${targetMarker1}$2`);
  const targetMarker2 = '/-/wikis/';
  const regex2 = /^(.*?)(?:\/wiki$|\/wiki\/)(.*)$/;
  path = path.replace(regex2, `$1${targetMarker2}$2`);
  const gitlabUrl = `https://gitlab.com/ohwr${path}`;
  const gitlabLink = document.getElementById("gitlab-link");
  if (gitlabLink) {
    gitlabLink.href = gitlabUrl;
    gitlabLink.textContent = gitlabUrl;
  }
</script>
{{ end }}
